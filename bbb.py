import random

player_hp = 200
familiar_hp = 100
inventory = []
familiar_alive = True
current_level = 1

def intro():
    print("=" * 50)
    print("         –ú–ê–ì–ò–ß–ï–°–ö–û–ï –ü–†–ò–ö–õ–Æ–ß–ï–ù–ò–ï")
    print("=" * 50)
    print("–í—ã - –º–æ–ª–æ–¥–æ–π –º–∞–≥, –ø–µ—Ä–µ—à–µ–¥—à–∏–π –¥–æ—Ä–æ–≥—É –¥—Ä–µ–≤–Ω–µ–π—à–µ–º—É –±—Ä–∞—Ç—Å—Ç–≤—É –º–∞–≥–æ–≤ –†–æ`–æ–¥–∞," \
    "–ø—Ä–æ–∏–≥—Ä–∞–≤—à–∏–π –≤ —Å–º–µ—Ä—Ç–µ–ª—å–Ω–æ–π —Å—Ö–≤–∞—Ç–∫–µ –∏ –æ–∫–∞–∑–∞–≤—à–∏–π—Å—è –≤ –∑–∞–≥–∞–¥–æ—á–Ω–æ–º –º–∏—Ä–µ.")
    print("–í–∞—à–∞ —Ü–µ–ª—å - –Ω–∞–π—Ç–∏ –ø—É—Ç—å –¥–æ–º–æ–π, –ø—Ä–µ–æ–¥–æ–ª–µ–≤ –≤—Å–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è.")
    print("–£–¥–∞—á–∏, –º–∞–≥!")
    print()

def show_status():
    print(f"–ó–¥–æ—Ä–æ–≤—å–µ –∏–≥—Ä–æ–∫–∞: {player_hp} HP")
    print(f"–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å: {inventory if inventory else '–ø—É—Å—Ç–æ'}")
    print(f"–§–∞–º–∏–ª—å—è—Ä: {familiar_hp if familiar_alive else '–º—ë—Ä—Ç–≤'} HP")
    print("-" * 30)

def level_1_healing_herb():
    global player_hp, inventory
    
    print("\n–£–†–û–í–ï–ù–¨ 1: –í–æ–∑—Ä–æ–∂–¥–µ–Ω–∏–µ")
    print("–í—ã —Ä–∞–Ω–µ–Ω—ã –∏ –Ω—É–∂–¥–∞–µ—Ç–µ—Å—å –≤ –ª–µ—á–µ–Ω–∏–∏. –ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ —Ü–µ–ª–µ–±–Ω—É—é —Ç—Ä–∞–≤—É.")
    print("–í—ã –≤ –ª–µ—Å—É. –ü–µ—Ä–µ–¥ –≤–∞–º–∏ —Ç—Ä–∏ —Ç—Ä–æ–ø–∏–Ω–∫–∏:")
    
    herbs_found = {
        "–ª–µ–≤–∞—è": {"success": True, "hint": "–¢—Ä–æ–ø–∏–Ω–∫–∞ –≤–µ–¥—ë—Ç –∫ —Å–æ–ª–Ω–µ—á–Ω–æ–π –ø–æ–ª—è–Ω–µ"},
        "–ø—Ä–∞–≤–∞—è": {"success": False, "hint": "–¢—Ä–æ–ø–∏–Ω–∫–∞ —É—Ö–æ–¥–∏—Ç –≤ —Ç—ë–º–Ω—É—é —á–∞—â—É"},
        "—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è": {"success": True, "hint": "–¢—Ä–æ–ø–∏–Ω–∫–∞ –ø–µ—Ç–ª—è–µ—Ç –º–µ–∂–¥—É –¥–µ—Ä–µ–≤—å—è–º–∏"}
    }
    
    print("1. –õ–µ–≤–∞—è —Ç—Ä–æ–ø–∏–Ω–∫–∞ - –≤–µ–¥—ë—Ç –∫ —Å–æ–ª–Ω–µ—á–Ω–æ–π –ø–æ–ª—è–Ω–µ")
    print("2. –ü—Ä–∞–≤–∞—è —Ç—Ä–æ–ø–∏–Ω–∫–∞ - —É—Ö–æ–¥–∏—Ç –≤ —Ç—ë–º–Ω—É—é —á–∞—â—É") 
    print("3. –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Ç—Ä–æ–ø–∏–Ω–∫–∞ - –ø–µ—Ç–ª—è–µ—Ç –º–µ–∂–¥—É –¥–µ—Ä–µ–≤—å—è–º–∏")
    
    while True:
        choice = input("\n–í—ã–±–µ—Ä–∏—Ç–µ —Ç—Ä–æ–ø–∏–Ω–∫—É (1/2/3): ").strip()
        
        if choice == "1":
            path = "–ª–µ–≤–∞—è"
            break
        elif choice == "2":
            path = "–ø—Ä–∞–≤–∞—è"
            break
        elif choice == "3":
            path = "—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è"
            break
        else:
            print("–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.")
    
    print(f"\n–í—ã –∏–¥—ë—Ç–µ –ø–æ {path} —Ç—Ä–æ–ø–∏–Ω–∫–µ...")
    
    if herbs_found[path]["success"]:
        print("–£–¥–∞—á–∞! –í—ã –Ω–∞—à–ª–∏ —Ü–µ–ª–µ–±–Ω—É—é —Ç—Ä–∞–≤—É –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ 50 HP!")
        player_hp += 50
        inventory.append("–¶–µ–ª–µ–±–Ω–∞—è —Ç—Ä–∞–≤–∞")
        return True
    else:
        print("–ù–µ—É–¥–∞—á–∞! –í—ã –Ω–∞—Ç–∫–Ω—É–ª–∏—Å—å –Ω–∞ —è–¥–æ–≤–∏—Ç–æ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ –∏ –ø–æ—Ç–µ—Ä—è–ª–∏ 50 HP!")
        player_hp -= 50
        return False

def level_1_artifact():
    global player_hp, inventory, current_level
    
    print("\n–ó–ê–î–ê–ù–ò–ï: –ü–æ–∏—Å–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏")
    print("–í–∞–º –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –¥—Ä–µ–≤–Ω–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –¥–ª—è –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è –¥–æ–º–æ–π.")
    print("–°—Ç–∞—Ä–∞—è –∫–∞—Ä—Ç–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç—Ä–∏ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –º–µ—Å—Ç–∞:")
    
    artifacts = {
        "–ø–µ—â–µ—Ä–∞": {
            "clues": ["–¢—ë–º–Ω–æ–µ –º–µ—Å—Ç–æ", "–≠—Ö–æ —à–∞–≥–æ–≤", "–ë–ª–µ—Å–∫ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤"],
            "correct": True
        },
        "–æ–∑–µ—Ä–æ": {
            "clues": ["–í–æ–¥–Ω–∞—è –≥–ª–∞–¥—å", "–û—Ç—Ä–∞–∂–µ–Ω–∏–µ –ª—É–Ω—ã", "–¢–∏—à–∏–Ω–∞"],
            "correct": False
        },
        "—Ä—É–∏–Ω—ã": {
            "clues": ["–î—Ä–µ–≤–Ω–∏–µ –∫–∞–º–Ω–∏", "–ü–æ—Ä–æ—Å—à–∏–µ –º—Ö–æ–º —Å—Ç–µ–Ω—ã", "–ó–∞–±—ã—Ç—ã–µ —Å–∏–º–≤–æ–ª—ã"],
            "correct": False
        }
    }
    
    print("\n–ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞:")
    for location, info in artifacts.items():
        print(f"- {location.capitalize()}: {', '.join(info['clues'])}")
    
    while True:
        choice = input("\n–ì–¥–µ –±—É–¥–µ—Ç–µ –∏—Å–∫–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç? (–ø–µ—â–µ—Ä–∞/–æ–∑–µ—Ä–æ/—Ä—É–∏–Ω—ã): ").strip().lower()
        
        if choice in artifacts:
            break
        else:
            print("–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.")
    
    if artifacts[choice]["correct"]:
        print("\n—ã –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –Ω–∞—à–ª–∏ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç –¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏!")
        inventory.append("–ê—Ä—Ç–µ—Ñ–∞–∫—Ç –¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏")
        
        print("\n–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –Ω–∞–ø–æ–ª–Ω–∏—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç —ç–Ω–µ—Ä–≥–∏–µ–π...")
        print("–î–ª—è —ç—Ç–æ–≥–æ –ø—Ä–æ–∏–∑–Ω–µ—Å–∏—Ç–µ –º–∞–≥–∏—á–µ—Å–∫–∏–µ —Å–ª–æ–≤–∞ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ:")
        
        spells = ["–ò–≥–Ω–∏—Å", "–ê–∫–≤–∞", "–¢–µ—Ä—Ä–∞", "–ê—ç—Ç–µ—Ä"]
        correct_order = ["–¢–µ—Ä—Ä–∞", "–ê–∫–≤–∞", "–ò–≥–Ω–∏—Å", "–ê—ç—Ç–µ—Ä"]
        
        print(f"–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ–≤–∞: {', '.join(spells)}")
        print("–ü–æ–¥—Å–∫–∞–∑–∫–∞: –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∑–µ–º–ª–∏, –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è —ç—Ñ–∏—Ä–æ–º")
        
        player_order = []
        for i in range(4):
            spell = input(f"–°–ª–æ–≤–æ {i+1}: ").strip()
            player_order.append(spell)
        
        if player_order == correct_order:
            print("\n‚ú® –ê—Ä—Ç–µ—Ñ–∞–∫—Ç –Ω–∞–ø–æ–ª–Ω–µ–Ω —ç–Ω–µ—Ä–≥–∏–µ–π! –í—ã —Ç–µ—Ä—è–µ—Ç–µ 50 HP –Ω–∞ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ.")
            player_hp -= 50
            print("–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å...")
            current_level = 2
            return True
        else:
            print("\n –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å! –ê—Ä—Ç–µ—Ñ–∞–∫—Ç –≤–∑—Ä—ã–≤–∞–µ—Ç—Å—è!")
            return False
    else:
        print("\n–ê—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –∑–¥–µ—Å—å –Ω–µ—Ç! –í—ã —Ç—Ä–∞—Ç–∏—Ç–µ –≤—Ä–µ–º—è –∏ —Å–∏–ª—ã.")
        player_hp -= 50
        return False

def level_2_rescue_familiar():
    global player_hp, familiar_hp, familiar_alive, current_level
    
    print("\n" + "="*50)
    print("–£–†–û–í–ï–ù–¨ 2: –°–ø–∞—Å–µ–Ω–∏–µ —Ñ–∞–º–∏–ª—å—è—Ä–∞")
    print("="*50)
    print("–í–∞—à —Ñ–∞–º–∏–ª—å—è—Ä –ø–æ–ø–∞–ª –≤ –ø–ª–µ–Ω –∫ –ª–µ—Å–Ω—ã–º –¥—É—Ö–∞–º!")
    print("–ù—É–∂–Ω–æ —Ä–µ—à–∏—Ç—å –∏—Ö –∑–∞–≥–∞–¥–∫—É, —á—Ç–æ–±—ã –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –µ–≥–æ.")
    
    riddles = {
        "–ß—Ç–æ –º–æ–∂–Ω–æ —Å–ª–æ–º–∞—Ç—å, –¥–∞–∂–µ –Ω–µ –∫–∞—Å–∞—è—Å—å?": "–º–æ–ª—á–∞–Ω–∏–µ",
        "–ß–µ–º –±–æ–ª—å—à–µ –±–µ—Ä—ë—à—å, —Ç–µ–º –±–æ–ª—å—à–µ –æ—Å—Ç–∞–≤–ª—è–µ—à—å?": "—Å–ª–µ–¥—ã", 
        "–Ø –ª–µ–≥—á–µ –ø–µ—Ä–∞, –Ω–æ –º–µ–Ω—è —Ç—Ä—É–¥–Ω–æ –¥–æ–ª–≥–æ —É–¥–µ—Ä–∂–∞—Ç—å?": "–¥—ã—Ö–∞–Ω–∏–µ"
    }
    
    riddle, answer = random.choice(list(riddles.items()))
    
    print(f"\n–î—É—Ö–∏ –∑–∞–¥–∞—é—Ç –∑–∞–≥–∞–¥–∫—É: {riddle}")
    player_answer = input("–í–∞—à –æ—Ç–≤–µ—Ç: ").strip().lower()
    
    if player_answer == answer:
        print("\n –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –î—É—Ö–∏ –æ—Ç–ø—É—Å–∫–∞—é—Ç –≤–∞—à–µ–≥–æ —Ñ–∞–º–∏–ª—å—è—Ä–∞!")
        print("–§–∞–º–∏–ª—å—è—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ –≤–∞–º –Ω–µ–≤—Ä–µ–¥–∏–º—ã–º.")
        current_level = 3
        return True
    else:
        print(f"\n –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: '{answer}'")
        print("–î—É—Ö–∏ —Ä–∞–Ω—è—Ç –≤–∞—à–µ–≥–æ —Ñ–∞–º–∏–ª—å—è—Ä–∞!")
        familiar_hp = 0
        
        print("\n–§–∞–º–∏–ª—å—è—Ä —Ç—è–∂–µ–ª–æ —Ä–∞–Ω–µ–Ω! –ß—Ç–æ –±—É–¥–µ—Ç–µ –¥–µ–ª–∞—Ç—å?")
        print("1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 50 HP –¥–ª—è –µ–≥–æ –ª–µ—á–µ–Ω–∏—è")
        print("2. –û—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ —É–º–∏—Ä–∞—Ç—å")
        
        while True:
            choice = input("–í–∞—à –≤—ã–±–æ—Ä (1/2): ").strip()
            
            if choice == "1":
                if player_hp >= 50:
                    player_hp -= 50
                    familiar_hp = 100
                    print("‚ú® –í—ã –∏—Å—Ü–µ–ª–∏–ª–∏ —Ñ–∞–º–∏–ª—å—è—Ä–∞! –û–Ω —Å–Ω–æ–≤–∞ —Å –≤–∞–º–∏.")
                    familiar_alive = True
                else:
                    print(" –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ HP –¥–ª—è –ª–µ—á–µ–Ω–∏—è! –§–∞–º–∏–ª—å—è—Ä —É–º–∏—Ä–∞–µ—Ç.")
                    familiar_alive = False
                break
            elif choice == "2":
                print(" –í—ã –æ—Å—Ç–∞–≤–ª—è–µ—Ç–µ —Ñ–∞–º–∏–ª—å—è—Ä–∞ —É–º–∏—Ä–∞—Ç—å...")
                familiar_alive = False
                break
            else:
                print("–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.")
        
        current_level = 3
        return False

def level_3_final_battle():
    global player_hp
    
    print("\n" + "="*50)
    print("–£–†–û–í–ï–ù–¨ 3: –§–∏–Ω–∞–ª—å–Ω–∞—è –±–∏—Ç–≤–∞ —Å –¢—ë–º–Ω—ã–º –ú–∞–≥–æ–º")
    print("="*50)
    print("–í—ã –≤–µ—Ä–Ω—É–ª–∏—Å—å –≤ —Å–≤–æ–π –º–∏—Ä –∏ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏ –º–æ–≥—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –¢—ë–º–Ω–æ–≥–æ –ú–∞–≥–∞!")
    print("–û–Ω –∞—Ç–∞–∫—É–µ—Ç! –ß—Ç–æ–±—ã –ø–æ–±–µ–¥–∏—Ç—å, –Ω—É–∂–Ω–æ —Å–æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞—â–∏—Ç–Ω–æ–µ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ.")
    
    spells_components = {
        "—â–∏—Ç": ["–∫—Ä–∏—Å—Ç–∞–ª–ª", "—Å–µ—Ä–µ–±—Ä–æ", "—Å–≤–µ—Ç"],
        "–æ–≥–æ–Ω—å": ["—Å–µ—Ä–∞", "–∂–∞—Ä–∞", "—è—Ä–æ—Å—Ç—å"],
        "–º–æ–ª–Ω–∏—è": ["—ç—Ñ–∏—Ä", "—Å–∫–æ—Ä–æ—Å—Ç—å", "–≥—Ä–æ–º"]
    }
    
    correct_spell = "—â–∏—Ç"
    components = spells_components[correct_spell]
    
    print(f"\n–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: {', '.join(sum(spells_components.values(), []))}")
    print("–ü–æ–¥—Å–∫–∞–∑–∫–∞: –¥–ª—è –∑–∞—â–∏—Ç—ã –Ω—É–∂–Ω—ã –∫—Ä–∏—Å—Ç–∞–ª–ª, —Å–µ—Ä–µ–±—Ä–æ –∏ —Å–≤–µ—Ç")
    
    print("\n–í—ã–±–µ—Ä–∏—Ç–µ 3 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –¥–ª—è –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è:")
    player_components = []
    
    for i in range(3):
        component = input(f"–ö–æ–º–ø–æ–Ω–µ–Ω—Ç {i+1}: ").strip().lower()
        player_components.append(component)
    
    if set(player_components) == set(components):
        print("\n‚ú®‚ú®‚ú® –ü–û–ë–ï–î–ê! ‚ú®‚ú®‚ú®")
        print("–í–∞—à–µ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ –æ—Ç—Ä–∞–∑–∏–ª–æ –∞—Ç–∞–∫—É –¢—ë–º–Ω–æ–≥–æ –ú–∞–≥–∞!")
        
        if familiar_alive:
            print(" –í–∞—à —Ñ–∞–º–∏–ª—å—è—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç –≤–∞–º 20 HP!")
            player_hp += 20
        
        print(f"\n–ò—Ç–æ–≥–æ–≤–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ: {player_hp} HP")
        print("üéä –í—ã –ø–æ–±–µ–¥–∏–ª–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç–µ—Å—å –¥–æ–º–æ–π!")
        return True
    else:
        print("\n –ó–∞–∫–ª–∏–Ω–∞–Ω–∏–µ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ! –¢—ë–º–Ω—ã–π –ú–∞–≥ –∞—Ç–∞–∫—É–µ—Ç!")
        player_hp -= 100
        
        if player_hp <= 0:
            print("üíÄ –í–ê–®–ê –°–ú–ï–†–¢–¨... –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.")
            return False
        else:
            print(f" –í—ã –≤—ã–∂–∏–ª–∏, –Ω–æ —Ç—è–∂–µ–ª–æ —Ä–∞–Ω–µ–Ω—ã. –û—Å—Ç–∞–ª–æ—Å—å {player_hp} HP")
            print("–í–∞–º —É–¥–∞–ª–æ—Å—å —Å–±–µ–∂–∞—Ç—å, –Ω–æ –ø–æ–±–µ–¥–∞ –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞.")
            return False

def check_game_over():
    if player_hp <= 0:
        print("\n –ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê - –í–´ –£–ú–ï–†–õ–ò")
        return True
    return False

def main():
    intro()
    
    # –£—Ä–æ–≤–µ–Ω—å 1
    show_status()
    if not level_1_healing_herb():
        if check_game_over():
            return
    
    show_status()
    if not level_1_artifact():
        print("—ã –°–ú–ï–†–¢–¨: –ê—Ä—Ç–µ—Ñ–∞–∫—Ç —É–Ω–∏—á—Ç–æ–∂–∏–ª –≤–∞—Å!")
        return
    
    # –£—Ä–æ–≤–µ–Ω—å 2
    show_status()
    level_2_rescue_familiar()
    
    # –£—Ä–æ–≤–µ–Ω—å 3
    show_status()
    level_3_final_battle()
    
    print("\n" + "="*50)
    print("         –ö–û–ù–ï–¶ –ò–ì–†–´")
    print("="*50)
    show_status()

if __name__ == "__main__":
    main()